(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02043288"],{"0efe":function(t,e,r){"use strict";r("f29e")},1148:function(t,e,r){"use strict";var n=r("a691"),i=r("1d80");t.exports=function(t){var e=String(i(this)),r="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(r+=e);return r}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),i=r("825a"),a=r("d039"),o=r("ad6d"),s="toString",c=RegExp.prototype,u=c[s],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=s;(l||d)&&n(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?o.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){if(Array.isArray(t))return n(t)}r.d(e,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r("fb6a"),r("b0c0");function o(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||a(t)||o(t)||s()}},"408a":function(t,e,r){var n=r("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"4df4":function(t,e,r){"use strict";var n=r("0366"),i=r("7b0b"),a=r("9bdd"),o=r("e95a"),s=r("50c4"),c=r("8418"),u=r("35a1");t.exports=function(t){var e,r,l,d,f,h,m=i(t),p="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,y=u(m),_=0;if(b&&(v=n(v,g>2?arguments[2]:void 0,2)),void 0==y||p==Array&&o(y))for(e=s(m.length),r=new p(e);e>_;_++)h=b?v(m[_],_):m[_],c(r,_,h);else for(d=y.call(m),f=d.next,r=new p;!(l=f.call(d)).done;_++)h=b?a(d,v,[l.value,_],!0):l.value,c(r,_,h);return r.length=_,r}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),i=r("5899"),a="["+i+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5b26":function(t,e,r){},7156:function(t,e,r){var n=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var a,o;return i&&"function"==typeof(a=e.constructor)&&a!==r&&n(o=a.prototype)&&o!==r.prototype&&i(t,o),t}},"7db0":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").find,a=r("44d2"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},"80f9":function(t,e,r){"use strict";r("eec7")},"841c":function(t,e,r){"use strict";var n=r("d784"),i=r("825a"),a=r("1d80"),o=r("129f"),s=r("14c3");n("search",1,(function(t,e,r){return[function(e){var r=a(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var a=i(t),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var l=s(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},9477:function(t,e,r){"use strict";r("5b26")},"9bdd":function(t,e,r){var n=r("825a"),i=r("2a62");t.exports=function(t,e,r,a){try{return a?e(n(r)[0],r[1]):e(r)}catch(o){throw i(t),o}}},a434:function(t,e,r){"use strict";var n=r("23e7"),i=r("23cb"),a=r("a691"),o=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),l=r("1dde"),d=l("splice"),f=Math.max,h=Math.min,m=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,n,l,d,g,v,b=s(this),y=o(b.length),_=i(t,y),w=arguments.length;if(0===w?r=n=0:1===w?(r=0,n=y-_):(r=w-2,n=h(f(a(e),0),y-_)),y+r-n>m)throw TypeError(p);for(l=c(b,n),d=0;d<n;d++)g=_+d,g in b&&u(l,d,b[g]);if(l.length=n,r<n){for(d=_;d<y-n;d++)g=d+n,v=d+r,g in b?b[v]=b[g]:delete b[v];for(d=y;d>y-n+r;d--)delete b[d-1]}else if(r>n)for(d=y-n;d>_;d--)g=d+n-1,v=d+r-1,g in b?b[v]=b[g]:delete b[v];for(d=0;d<r;d++)b[d+_]=arguments[d+2];return b.length=y-n+r,l}})},a630:function(t,e,r){var n=r("23e7"),i=r("4df4"),a=r("1c7e"),o=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},a9e3:function(t,e,r){"use strict";var n=r("83ab"),i=r("da84"),a=r("94ca"),o=r("6eeb"),s=r("5135"),c=r("c6b6"),u=r("7156"),l=r("c04e"),d=r("d039"),f=r("7c73"),h=r("241c").f,m=r("06cf").f,p=r("9bf2").f,g=r("58a8").trim,v="Number",b=i[v],y=b.prototype,_=c(f(y))==v,w=function(t){var e,r,n,i,a,o,s,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=g(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(a=u.slice(2),o=a.length,s=0;s<o;s++)if(c=a.charCodeAt(s),c<48||c>i)return NaN;return parseInt(a,n)}return+u};if(a(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,S=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof S&&(_?d((function(){y.valueOf.call(r)})):c(r)!=v)?u(new b(w(e)),r,S):w(e)},k=n?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;k.length>I;I++)s(b,x=k[I])&&!s(S,x)&&p(S,x,m(b,x));S.prototype=y,y.constructor=S,o(i,v,S)}},b680:function(t,e,r){"use strict";var n=r("23e7"),i=r("a691"),a=r("408a"),o=r("1148"),s=r("d039"),c=1..toFixed,u=Math.floor,l=function(t,e,r){return 0===e?r:e%2===1?l(t,e-1,r*t):l(t*t,e/2,r)},d=function(t){var e=0,r=t;while(r>=4096)e+=12,r/=4096;while(r>=2)e+=1,r/=2;return e},f=function(t,e,r){var n=-1,i=r;while(++n<6)i+=e*t[n],t[n]=i%1e7,i=u(i/1e7)},h=function(t,e){var r=6,n=0;while(--r>=0)n+=t[r],t[r]=u(n/e),n=n%e*1e7},m=function(t){var e=6,r="";while(--e>=0)if(""!==r||0===e||0!==t[e]){var n=String(t[e]);r=""===r?n:r+o.call("0",7-n.length)+n}return r},p=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));n({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,r,n,s,c=a(this),u=i(t),p=[0,0,0,0,0,0],g="",v="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(e=d(c*l(2,69,1))-69,r=e<0?c*l(2,-e,1):c/l(2,e,1),r*=4503599627370496,e=52-e,e>0){f(p,0,r),n=u;while(n>=7)f(p,1e7,0),n-=7;f(p,l(10,n,1),0),n=e-1;while(n>=23)h(p,1<<23),n-=23;h(p,1<<n),f(p,1,1),h(p,2),v=m(p)}else f(p,0,r),f(p,1<<-e,0),v=m(p)+o.call("0",u);return u>0?(s=v.length,v=g+(s<=u?"0."+o.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u))):v=g+v,v}})},b8f1:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inventory-layout"},[r("layout-top",{staticStyle:{"z-index":"1000"},attrs:{name:"在线报价",backTo:"/home/design-list"}},[r("a-button",{staticStyle:{"font-size":".12rem",height:".3rem","font-weight":"bold"},attrs:{type:"primary",size:"small"},on:{click:t.saveUserOffer}},[t._v("保存报价 ")])],1),r("a-drawer",{attrs:{title:"新增辅料人工",placement:"right",closable:!1,visible:t.showfuliao,"get-container":!1},on:{close:function(){return t.showfuliao=!1}}},[r("div",[r("a-select",{staticStyle:{width:"100%",height:".25rem"},attrs:{placeholder:"新增辅料人工",size:"default"},on:{change:t.handlefuliaoChange}},t._l(t.fuliaoList,(function(e,n){return r("a-select-option",{key:n,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1),r("div",{directives:[{name:"show",rawName:"v-show",value:this.filiaoId,expression:"this.filiaoId"}],staticStyle:{margin:"0px auto",width:"100%","margin-top":"70%"}},[r("a-button",{staticStyle:{"font-size":".12rem",height:".25rem","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确认")]),r("a-button",{staticStyle:{"font-size":".12rem",height:".25rem","margin-left":"10px"},attrs:{type:"danger"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1)]),r("a-drawer",{staticClass:"drawer-search",staticStyle:{"text-align":"center"},attrs:{title:"请选择产品",placement:"right",closable:!1,maskClosable:!0,visible:t.showSelect},on:{close:function(){return t.showSelect=!1}}},[r("div",{on:{click:function(t){t.stopPropagation()}}},[r("div",[r("a-input",{staticStyle:{"margin-bottom":".1rem","font-size":".12rem"},attrs:{placeholder:"请输入名称搜索"},on:{change:t.searchChange},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),r("div",{staticClass:"search-result"},t._l(t.searchList,(function(e){return r("div",{key:Number(e.id),staticClass:"search-product-list",class:{selected:t.selected.product_id==e.id},on:{click:function(r){return t.selectPro(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),r("div",{staticClass:"inventory-content"},[t.showEdit&&t.init?r("div",{staticClass:"add-table"},[r("div",{staticClass:"input-container"},[r("a-input",{staticClass:"input-origin",attrs:{placeholder:"输入客户姓名"},model:{value:t.temp.customer_name,callback:function(e){t.$set(t.temp,"customer_name",e)},expression:"temp.customer_name"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.3)"},attrs:{slot:"prefix",type:"solution"},slot:"prefix"})],1),r("a-input",{staticClass:"input-origin",attrs:{placeholder:"输入客户电话"},model:{value:t.temp.customer_mobile,callback:function(e){t.$set(t.temp,"customer_mobile",e)},expression:"temp.customer_mobile"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.3)"},attrs:{slot:"prefix",type:"phone",rotate:120},slot:"prefix"})],1)],1)]):t._e(),r("div",{staticClass:"add-table"},[r("div",{staticClass:"input-container"},[t.selected.parent_category_id?r("a-select",{staticStyle:{width:"2rem","margin-right":".15rem"},attrs:{placeholder:"请选择产品大类"},on:{change:t.parentCateChange},model:{value:t.selected.parent_category_id,callback:function(e){t.$set(t.selected,"parent_category_id",e)},expression:"selected.parent_category_id"}},t._l(t.parentCateArr,(function(e){return r("a-select-option",{key:e.id,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1):r("a-select",{staticStyle:{width:"2rem","margin-right":".15rem",border:"red solid 2px","border-radius":"7px"},attrs:{placeholder:"请选择产品大类"},on:{change:t.parentCateChange},model:{value:t.selected.parent_category_id,callback:function(e){t.$set(t.selected,"parent_category_id",e)},expression:"selected.parent_category_id"}},t._l(t.parentCateArr,(function(e){return r("a-select-option",{key:e.id,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1),r("a-select",{staticStyle:{width:"2rem","margin-right":".15rem"},attrs:{disabled:!t.selected.parent_category_id,placeholder:"请选择产品版本"},on:{change:t.cateChange},model:{value:t.selected.category_id,callback:function(e){t.$set(t.selected,"category_id",e)},expression:"selected.category_id"}},t._l(t.cateArr,(function(e){return r("a-select-option",{key:Number(e.id),attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1),r("div",{},[this.selected.category_id?r("a-button",{staticStyle:{"font-size":".12rem",height:".3rem",padding:".1rem","line-height":".05rem"},attrs:{type:"danger",disabled:!t.selected.category_id},on:{click:t.showDrawer}},[t._v("新增产品")]):r("a-button",{staticStyle:{"font-size":".12rem",height:".3rem",padding:".1rem","line-height":".05rem"},attrs:{type:"danger"},on:{click:t.addProductInfo}},[t._v("新增产品")]),r("a-button",{staticStyle:{"font-size":".12rem",height:".3rem","margin-left":"0.1rem","line-height":".05rem"},attrs:{type:"primary"},on:{click:t.handleOpenAdd}},[t._v("新增辅料")])],1)],1)]),r("div",{staticStyle:{"font-size":"1px"}},[r("a-table",{attrs:{columns:t.columns,"data-source":t.productList,pagination:!1,bordered:"",rowKey:function(t,e){return e}},scopedSlots:t._u([{key:"image",fn:function(e,n){return r("div",{},[r("div",{staticStyle:{width:"1rem",height:"100%","min-height":".6rem",margin:"0 auto"},style:{background:"url("+n.image+") center center","background-size":"窗帘"===n.parent_category_name?"":"100%"}}),r("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(n.name))])])}},{key:"param",fn:function(e,n){return r("div",{},[n.category?r("div",{staticStyle:{"font-weight":"bold","font-size":".10rem"}},[t._v(" "+t._s(n.category.name?"《"+n.category.name+"》":"")+" ")]):t._e(),r("div",{staticStyle:{"font-weight":"bold","font-size":".11rem"}},[t._v(" "+t._s(n.parent_category.name)+" ")]),r("div",[t._v(t._s(n.product_attribute))])])}},{key:"price",fn:function(e,n){return["fuliao"===n.from?r("div",[r("a-input-number",{staticStyle:{"text-align":"center","font-size":".12rem",width:".8rem"},attrs:{step:.1,min:.1,max:999},model:{value:n.price,callback:function(e){t.$set(n,"price",e)},expression:"record.price"}}),r("div",{staticStyle:{"font-weight":"bold","font-size":".11rem"}},[t._v("元每"+t._s(n.unit))])],1):r("div",{staticStyle:{"font-weight":"bold","font-size":".11rem"}},[r("div",[t._v("¥"+t._s(n.price))]),r("div",[t._v("每"+t._s(n.unit))])])]}},{key:"num",fn:function(e,n){return[r("a-input-number",{staticStyle:{"text-align":"center","font-size":".12rem",width:".8rem"},attrs:{step:.1,min:.1,max:999},model:{value:n.num,callback:function(e){t.$set(n,"num",e)},expression:"record.num"}})]}},{key:"discount",fn:function(e,n){return[1==n.product_offer_status?r("a-input-number",{staticStyle:{"text-align":"center","font-size":".12rem",width:".8rem"},attrs:{"default-value":100,step:5,min:10,max:100,formatter:function(t){return t+"%"}},model:{value:n.discount,callback:function(e){t.$set(n,"discount",e)},expression:"record.discount"}}):r("p",{staticStyle:{"font-size":"0.10rem",margin:"0 auto"}},[t._v("暂无折扣")])]}},{key:"total",fn:function(e,n){return r("div",{},[r("div",{staticStyle:{"font-size":".13rem","font-weight":"bold",color:"#ff4d4f"}},[t._v("¥"+t._s(t.rowTotal(n)))])])}},{key:"operation",fn:function(e,n,i){return[r("a-icon",{style:{fontSize:".2rem"},attrs:{type:"delete",theme:"twoTone","two-tone-color":"#f40c0c"},on:{click:function(e){return t.handleDel(i)}}})]}}])})],1)]),r("div",{staticClass:"fixed-total",staticStyle:{height:"0.5rem",background:"rgb(255, 255, 255) none repeat scroll 0% 0%","border-top":"1px solid #ecebeb"}},[r("div",{staticStyle:{"font-size":".14rem","padding-right":".1rem","font-weight":"bold"}},[t._v("整单折扣：")]),r("a-slider",{staticStyle:{width:"25%"},attrs:{tipFormatter:function(t){return t+"%"},"default-value":100,step:5,min:10,max:100,formatter:function(t){return t+"%"}},model:{value:t.totalDiscount,callback:function(e){t.totalDiscount=e},expression:"totalDiscount"}}),r("a-input-number",{staticStyle:{"font-size":".14rem",color:"#1890ff","margin-left":".2rem","margin-right":".1rem"},attrs:{"default-value":100,step:5,min:10,max:100,formatter:function(t){return t+"%"}},model:{value:t.totalDiscount,callback:function(e){t.totalDiscount=e},expression:"totalDiscount"}}),r("div",{staticStyle:{"font-size":".16rem","font-weight":"bold",width:"10%","text-align":"right"}},[t._v("合计:")]),r("div",{staticStyle:{"font-size":".16rem","font-weight":"bold",color:"#ff4d4f","margin-left":"10px",width:"10%","text-align":"left"}},[t._v(" ¥"+t._s(t.total()))])],1)],1)},i=[],a=r("2909"),o=r("1da1"),s=r("5530"),c=(r("96cf"),r("b0c0"),r("ac1f"),r("841c"),r("4de4"),r("caad"),r("2532"),r("7db0"),r("d3b7"),r("25f0"),r("b680"),r("a9e3"),r("d81d"),r("c740"),r("159b"),r("a434"),r("e73e")),u=[{title:"产品图",dataIndex:"image",width:"20%",align:"center",scopedSlots:{customRender:"image"}},{title:"属性",dataIndex:"",width:"15%",align:"center",scopedSlots:{customRender:"param"}},{title:"单价",dataIndex:"",width:"10%",align:"center",scopedSlots:{customRender:"price"}},{title:"数量",dataIndex:"num",width:"10%",align:"center",scopedSlots:{customRender:"num"}},{title:"单品折扣",dataIndex:"discount",width:"15%",align:"center",scopedSlots:{customRender:"discount"}},{title:"合计",dataIndex:"total",width:"20%",align:"center",scopedSlots:{customRender:"total"}},{title:"操作",width:"10%",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}],l={components:{layoutTop:c["a"]},data:function(){return{id:"",showfuliao:!1,canAdd:!0,showSelect:!1,inputValue1:1,totalDiscount:100,product_offer_status:!1,columns:u,finished:!1,limit:150,page:1,loading:!1,offerImage:"",fuliaoList:[],filiaoId:"",productList:[],init:!0,showEdit:!0,search:{name:""},temp:{customer_name:"",customer_mobile:"",offer_remark:""},userForm:{customer_name:"",customer_mobile:"",offer_remark:""},options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",isLeaf:!1}]}],parentCateArr:[],cateArr:[],productArr:[],selected:{content:""},searchList:[],selectedValue:[]}},mounted:function(){this.id=this.$route.query.id,this.loadfuliaoList(),this.getData()},computed:{userInfo:function(){return this.$store.state.user.userInfo}},methods:{addProductInfo:function(){this.selected.parent_category_id?this.selected.category_id||this.$message.warning("请选择产品版本"):this.$message.warning("请选择产品大类")},handlefuliaoChange:function(t){this.filiaoId=t},showDrawer:function(){this.showSelect=!0,this.search.name=""},onClose:function(){this.showSelect=!1},selectPro:function(t){this.selected.product_id=t.id,this.selected.content=t,this.addProduct(),this.showSelect=!1},searchChange:function(t){this.search.name=t.target.value,t.target.value?this.searchList=this.productArr.filter((function(e){return e.name.includes(t.target.value)})):this.searchList=this.productArr},handleConfirm:function(){var t=this;if(this.filiaoId){var e=this.fuliaoList.find((function(e){return e.id==t.filiaoId}));this.productList.push(Object(s["a"])(Object(s["a"])({},e),{},{from:"fuliao",num:1,key:this.productList.length.toString()})),this.showfuliao=!1,this.filiaoId=""}else this.$message.warning("请在下拉菜单选择辅料")},handleCancel:function(){this.showSelect=!1},parentCateChange:function(t){this.cateArr=this.options.find((function(e){return e.id==t})).children,this.selected.parent_category_id=t,this.selected.category_id="",this.selected.product_id=""},cateChange:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.selected.category_id=t,e.selected.product_id="",r.next=4,e.getMaterial();case 4:n=r.sent,e.productArr=Object(a["a"])(n),e.searchList=Object(a["a"])(n);case 7:case"end":return r.stop()}}),r)})))()},productChange:function(t){this.selected.product_id=t,this.selected.content=this.productArr.find((function(e){return e.id==t}))},rowTotal:function(t){var e=t.price*t.num*t.discount/100;return e>0?e.toFixed(2):0},total:function(){for(var t=0,e=0;e<this.productList.length;e++)t+=Number(this.rowTotal(this.productList[e]));return t*=this.totalDiscount/100,t.toFixed(2)},loadfuliaoList:function(){var t=this;this.$service.chuanglianfuliaoList().then((function(e){t.fuliaoList=e.data.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{image:t.pre_img,discount:100,num:0,parent_category:{name:"辅料"},product_offer_status:0})}))}))},getPopupContainer:function(){return this.$refs.parentSelect},addProduct:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.cartList({user_id:t.userInfo.id,category_id:t.selected.category_id});case 2:r=e.sent,t.selected.content.product_offer_status=r.data[0].product_offer_status,r.data&&r.data.length&&(t.selected.content.price=(Number(t.selected.content.price)*(Number(r.data[0].price_rate)||1)).toFixed(2)),t.selected.content&&(n=t.productList.findIndex((function(e){return e.id===t.selected.content.id})),-1!==n?t.productList[n].num++:t.productList.push(Object(s["a"])({},t.selected.content)));case 6:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.categoryTree({});case 2:r=e.sent,t.options=r,t.parentCateArr=r.map((function(t){return{value:t.id,label:t.name,id:t.id}}));case 5:case"end":return e.stop()}}),e)})))()},getMaterial:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.selected.parent_category_id&&e.selected.category_id){r.next=2;break}return r.abrupt("return");case 2:if(t&&(e.page=1,e.finished=!1),!e.loading){r.next=5;break}return r.abrupt("return");case 5:return e.loading=!0,r.next=8,e.$service.productList({parent_category_id:e.selected.parent_category_id,category_id:e.selected.category_id,page:1,per_page:e.limit});case 8:return n=r.sent,n.data.forEach((function(t){t.discount=100,t.num=1})),e.loading=!1,r.abrupt("return",n.data);case 12:case"end":return r.stop()}}),r)})))()},saveUserOffer:function(){var t=this,e=this;if(0===this.productList.length)return this.$message.error("您还没有添加任何商品，请到云设计报价");if(!this.temp.customer_name||!this.temp.customer_mobile)return this.$message.error("请输入客户姓名和电话");if(this.temp.customer_mobile.length<11)return this.$message.error("请输入正确的电话号码");if(this.temp.customer_name&&this.temp.customer_mobile){var r=this.productList.every((function(t){return t.num&&t.num>0}));if(!r)return this.$message.error("数量不能为0或者空");this.$service.saveUserOffer({user_room_finished_id:this.id,offer_image:"https://debake.oss-cn-shanghai.aliyuncs.com/za_pic/zaixianbaojia/zaixianbaojia.jpg",product_list:this.productList,customer_name:this.temp.customer_name,customer_mobile:this.temp.customer_mobile,offer_remark:this.temp.offer_remark,totalDiscount:this.totalDiscount}).then((function(e){t.$message.success("保存成功"),t.$router.push({path:"/offerDetail",query:{id:e.id}})})).catch((function(t){return console.log("saveUserOffer",t),e.$message.error("保存失败")}))}else e.$message.error("请填写客户信息")},handleAdd:function(){return this.temp.customer_name&&this.temp.customer_mobile?this.temp.customer_mobile.length<11?this.$message.error("请输入正确的电话号码"):(this.userForm={customer_name:this.temp.customer_name,customer_mobile:this.temp.customer_mobile,offer_remark:this.temp.offer_remark},void(this.showEdit=!1)):this.$message.error("请输入客户姓名和客户电话")},handleOpenAdd:function(){this.showfuliao=!0},handleDel:function(t){var e=this;this.$confirm({title:"确认",content:"是否删除所选产品",okText:"确认",cancelText:"取消",onOk:function(){e.productList.splice(t,1)},onCancel:function(){console.log("取消")}})}}},d=l,f=(r("0efe"),r("9477"),r("2877")),h=Object(f["a"])(d,n,i,!1,null,"7c4bdfa3",null);e["default"]=h.exports},c740:function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").findIndex,a=r("44d2"),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},d28b:function(t,e,r){var n=r("746f");n("iterator")},e01a:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),a=r("da84"),o=r("5135"),s=r("861d"),c=r("9bf2").f,u=r("e893"),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(f,l);var h=f.prototype=l.prototype;h.constructor=f;var m=h.toString,p="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(o(d,t))return"";var r=p?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}},e73e:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-layout-top"},[r("h4",[t._v(t._s(t.name))]),r("div",{staticClass:"back-btn",on:{click:t.goBack}},[r("a-icon",{staticStyle:{"vertical-align":"middle"},style:{fontSize:"0.23rem"},attrs:{type:"left-circle",theme:"filled"}})],1),r("div",{staticClass:"my-layout-top-right flex-box"},[r("div",{staticClass:"my-layout-top-op"},[t._t("default")],2)])])},i=[],a=(r("ac1f"),r("5319"),{props:{name:{type:String,default:""},backTo:String,baojiaheader:""},data:function(){return{}},methods:{goBack:function(){this.backTo?this.$router.replace(this.backTo):"qingdan"==this.baojiaheader?this.$router.push("/priceRecord"):this.$router.push("home/userinfo")}}}),o=a,s=(r("80f9"),r("2877")),c=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},eec7:function(t,e,r){},f29e:function(t,e,r){},fb6a:function(t,e,r){"use strict";var n=r("23e7"),i=r("861d"),a=r("e8b5"),o=r("23cb"),s=r("50c4"),c=r("fc6a"),u=r("8418"),l=r("b622"),d=r("1dde"),f=d("slice"),h=l("species"),m=[].slice,p=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var r,n,l,d=c(this),f=s(d.length),g=o(t,f),v=o(void 0===e?f:e,f);if(a(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?i(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(d,g,v);for(n=new(void 0===r?Array:r)(p(v-g,0)),l=0;g<v;g++,l++)g in d&&u(n,l,d[g]);return n.length=l,n}})}}]);