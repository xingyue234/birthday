(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09fd642c"],{"25f0":function(e,t,a){"use strict";var r=a("6eeb"),n=a("825a"),c=a("d039"),i=a("ad6d"),o="toString",s=RegExp.prototype,l=s[o],u=c((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&r(RegExp.prototype,o,(function(){var e=n(this),t=String(e.source),a=e.flags,r=String(void 0===a&&e instanceof RegExp&&!("flags"in s)?i.call(e):a);return"/"+t+"/"+r}),{unsafe:!0})},"3bdc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"price-layout"},[a("layout-top",{attrs:{name:"价格管理"}},[e.editable?[a("a-button",{staticStyle:{"font-size":"0.12rem",height:".25rem"},attrs:{type:"danger"},on:{click:e.save}},[e._v("保存")]),a("a-button",{staticStyle:{"margin-left":".2rem","font-size":"0.12rem",height:".25rem"},attrs:{type:"primary"},on:{click:e.cancelsave}},[e._v("取消")])]:a("a-button",{staticStyle:{"font-size":"0.12rem",height:".25rem"},attrs:{type:"danger"},on:{click:function(t){e.editable=!0}}},[e._v("修改策略")])],2),a("div",{staticClass:"price-content"},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.data,pagination:!1,bordered:""},on:{change:e.onChange},scopedSlots:e._u([{key:"image",fn:function(e,t){return a("div",{},[a("img",{staticClass:"cover-img",attrs:{src:t.category.image,alt:""}})])}},{key:"nowPrice",fn:function(t,r){return a("div",{staticStyle:{"font-weight":"bold"}},[e._v(" "+e._s(r.category.price?e.accMul(r.category.price,r.price_rate)+"元/平":"暂无价格")+" ")])}},{key:"price_rate",fn:function(t,r){return[e.editable?a("a-input-number",{attrs:{step:.1,min:.1,max:10},on:{change:e.handleChange},model:{value:r.price_rate,callback:function(t){e.$set(r,"price_rate",t)},expression:"record.price_rate"}}):a("span",{staticStyle:{"font-weight":"bold"}},[e._v(" "+e._s(r.price_rate)+" ")])]}},{key:"product_offer_status",fn:function(t,r){return[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],style:{margin:"0 auto",color:1==r.product_offer_status?"red":""}},[e._v(e._s(1==r.product_offer_status?"开":"关"))]),a("a-switch",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],attrs:{"checked-children":"开","un-checked-children":"关","default-checked":"",disabled:!e.editable},on:{change:e.onChangepo},model:{value:r.checked,callback:function(t){e.$set(r,"checked",t)},expression:"record.checked"}})]}}])})],1)],1)],1)},n=[],c=a("5530"),i=(a("d81d"),a("d3b7"),a("25f0"),a("ac1f"),a("1276"),a("a9e3"),a("5319"),a("e73e")),o=[{title:"版本封面",dataIndex:"image",width:"15%",align:"center",scopedSlots:{customRender:"image"}},{title:"版本名",dataIndex:"category.name",width:"15%",align:"center"},{title:"上市时间",dataIndex:"category.timeToMarket",width:"10%",align:"center",defaultSortOrder:"descend",sorter:function(e,t){return e.category.timeToMarket-t.category.timeToMarket}},{title:"建议零售价",dataIndex:"category.price",width:"15%",align:"center",defaultSortOrder:"descend",sorter:function(e,t){return e.category.price-t.category.price}},{title:"价格倍数",dataIndex:"price_rate",width:"15%",align:"center",scopedSlots:{customRender:"price_rate"},defaultSortOrder:"descend",sorter:function(e,t){return e.price_rate-t.price_rate}},{title:"单品折扣",dataIndex:"product_offer_status",width:"10%",align:"center",scopedSlots:{customRender:"product_offer_status"}},{title:"现价",dataIndex:"nowPrice",width:"20%",align:"center",scopedSlots:{customRender:"nowPrice"}}],s={components:{layoutTop:i["a"]},data:function(){return{data:[],loading:!1,columns:o,editable:!1}},mounted:function(){this.loadData()},methods:{onChange:function(e,t,a){console.log("params",e,t,a)},onChangepo:function(e){var t=1;t=!0===e?1:0,console.log(e),console.log(t)},loadData:function(){var e=this;this.loading=!0,this.$service.categoryPriceList().then((function(t){e.loading=!1,e.data=t.data.map((function(e,t){return Object(c["a"])({key:t,price_rate:e.price_rate?e.price_rate:1,checked:Boolean(e.product_offer_status)},e)}))})).catch((function(){e.loading=!1}))},handleChange:function(e){console.log(e)},accMul:function(e,t){var a=0,r=e.toString(),n=t.toString();try{a+=r.split(".")[1].length}catch(c){}try{a+=n.split(".")[1].length}catch(c){}return Number(r.replace(".",""))*Number(n.replace(".",""))/Math.pow(10,a)},save:function(){var e=this;this.editable=!1;var t=this.data.map((function(e){return{category_id:e.category_id,price_rate:e.price_rate,product_offer_status:!0===e.checked?1:0}}));this.$service.categoryPriceSave({category_price:t}).then((function(t){e.$message.success("保存成功"),e.loadData()}))},cancelsave:function(){this.editable=!1}}},l=s,u=(a("ff8f"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,null,null);t["default"]=d.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),n=a("5899"),c="["+n+"]",i=RegExp("^"+c+c+"*"),o=RegExp(c+c+"*$"),s=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,a){var r=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var c,i;return n&&"function"==typeof(c=t.constructor)&&c!==a&&r(i=c.prototype)&&i!==a.prototype&&n(e,i),e}},"80f9":function(e,t,a){"use strict";a("eec7")},a9e3:function(e,t,a){"use strict";var r=a("83ab"),n=a("da84"),c=a("94ca"),i=a("6eeb"),o=a("5135"),s=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),p=a("241c").f,g=a("06cf").f,h=a("9bf2").f,m=a("58a8").trim,_="Number",b=n[_],v=b.prototype,y=s(f(v))==_,k=function(e){var t,a,r,n,c,i,o,s,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=m(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(c=l.slice(2),i=c.length,o=0;o<i;o++)if(s=c.charCodeAt(o),s<48||s>n)return NaN;return parseInt(c,r)}return+l};if(c(_,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,w=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof w&&(y?d((function(){v.valueOf.call(a)})):s(a)!=_)?l(new b(k(t)),a,w):k(t)},I=r?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;I.length>x;x++)o(b,S=I[x])&&!o(w,S)&&h(w,S,g(b,S));w.prototype=v,v.constructor=w,i(n,_,w)}},d28bd:function(e,t,a){},e73e:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-layout-top"},[a("h4",[e._v(e._s(e.name))]),a("div",{staticClass:"back-btn",on:{click:e.goBack}},[a("a-icon",{staticStyle:{"vertical-align":"middle"},style:{fontSize:"0.23rem"},attrs:{type:"left-circle",theme:"filled"}})],1),a("div",{staticClass:"my-layout-top-right flex-box"},[a("div",{staticClass:"my-layout-top-op"},[e._t("default")],2)])])},n=[],c=(a("ac1f"),a("5319"),{props:{name:{type:String,default:""},backTo:String,baojiaheader:""},data:function(){return{}},methods:{goBack:function(){this.backTo?this.$router.replace(this.backTo):"qingdan"==this.baojiaheader?this.$router.push("/priceRecord"):this.$router.push("home/userinfo")}}}),i=c,o=(a("80f9"),a("2877")),s=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=s.exports},eec7:function(e,t,a){},ff8f:function(e,t,a){"use strict";a("d28bd")}}]);