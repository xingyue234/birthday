(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-688f5730"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"18c0":function(t,e,n){"use strict";n("7dc5")},"39a1":function(t,e,n){"use strict";n("4a17")},"4a17":function(t,e,n){},"5fe3":function(t,e,n){},"7dc5":function(t,e,n){},"80f9":function(t,e,n){"use strict";n("eec7")},"841c":function(t,e,n){"use strict";var a=n("d784"),i=n("825a"),s=n("1d80"),r=n("129f"),c=n("14c3");a("search",1,(function(t,e,n){return[function(e){var n=s(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,t,this);if(a.done)return a.value;var s=i(t),o=String(this),l=s.lastIndex;r(l,0)||(s.lastIndex=0);var u=c(s,o);return r(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},a15b:function(t,e,n){"use strict";var a=n("23e7"),i=n("44ad"),s=n("fc6a"),r=n("a640"),c=[].join,o=i!=Object,l=r("join",",");a({target:"Array",proto:!0,forced:o||!l},{join:function(t){return c.call(s(this),void 0===t?",":t)}})},b8b9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-record-layout"},[n("layout-top",{attrs:{name:"报价记录"}},[t.isEdit?[n("a-button",{attrs:{size:"small"},on:{click:t.handleSelectAll}},[t._v("全选")]),n("a-button",{attrs:{size:"small"},on:{click:t.handleCancelAll}},[t._v("全不选")]),n("a-button",{attrs:{size:"small",type:"danger"},on:{click:t.handleDel}},[t._v("删除")]),n("a-button",{attrs:{size:"small"},on:{click:t.cancleAll}},[t._v("取消")])]:n("a-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.main_page_list.length,expression:"main_page_list.length !== 0"}],attrs:{size:"small",type:"primary"},on:{click:t.goManage}},[t._v(" 管理")]),t.search.name||t.search.phone?n("a-button",{attrs:{type:"danger",size:"small"},on:{click:t.resetSearch}},[t._v(" 重置搜索 ")]):n("a-button",{attrs:{size:"small",type:"danger"},on:{click:t.showSearch}},[t._v(" 搜索 ")])],2),n("div",{staticClass:"record-content"},[t.main_page_list.length?n("div",{ref:"listContainer",staticClass:"main-page-list",on:{scroll:t.onScroll}},[n("ul",{staticClass:"page-list"},[t._l(t.main_page_list,(function(e,a){return n("li",{key:a},[n("list-item",{attrs:{disabled:t.disabled,info:e},on:{click:t.listClick}})],1)})),t._l(t.moreNum,(function(t){return n("li")}))],2)]):t.search.phone||t.search.name?n("a-empty",[n("span",{staticStyle:{"font-size":".12rem",color:"rgb(162, 162, 162)"},attrs:{slot:"description"},slot:"description"},[t._v("没有搜索到你想要的结果哦")])]):n("a-empty",[n("span",{staticStyle:{"font-size":".12rem",color:"rgb(162, 162, 162)"},attrs:{slot:"description"},slot:"description"},[t._v("您还没有报价记录哦")])]),n("a-drawer",{attrs:{title:"搜索",placement:"right",closable:!1,visible:t.showSelect,"get-container":!1},on:{close:t.onClose}},[t.showSelect?n("div",{staticStyle:{display:"inline"}},[n("a-input",{staticStyle:{"margin-bottom":".1rem"},attrs:{placeholder:"请输入姓名搜索"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),n("a-input",{attrs:{type:"tel",placeholder:"请输入手机号搜索"},model:{value:t.search.phone,callback:function(e){t.$set(t.search,"phone",e)},expression:"search.phone"}}),n("div",{staticStyle:{margin:"0px auto",width:"100%","margin-top":"70%"}},[n("a-button",{staticStyle:{"font-size":".12rem",height:".25rem","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确认")]),n("a-button",{staticStyle:{"font-size":".12rem",height:".25rem","margin-left":"10px"},attrs:{type:"danger"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1):t._e()])],1)],1)},i=[],s=n("5530"),r=n("1da1"),c=(n("b0c0"),n("ac1f"),n("841c"),n("d81d"),n("4de4"),n("a15b"),n("159b"),n("99af"),n("96cf"),n("e73e")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-page-item",class:{active:t.info.selected},on:{click:t.toDesign}},[n("img",{staticClass:"sub-page-image",style:t.imgStyle,attrs:{src:t.info.offer_image},on:{load:t.imageLoad}}),n("div",{staticClass:"sub-page-info"},[n("span",[t._v(t._s(t.info.customer_name)+t._s(t.info.customer_mobile))])])])},l=[],u={props:{width:String,height:String,info:{type:Object},disabled:{type:Boolean,default:!1}},computed:{imgStyle:function(){return this.naturalHeight/this.naturalWidth>2/2.6?{width:"100%"}:{height:"100%"}}},data:function(){return{naturalHeight:"",naturalWidth:""}},methods:{imageLoad:function(t){t.target&&(this.naturalHeight=t.target.naturalHeight,this.naturalWidth=t.target.naturalWidth)},toDesign:function(){this.$emit("click",this.info),this.disabled||this.$router.push({path:"/offerDetail",query:{id:this.info.id}})}}},h=u,d=(n("18c0"),n("2877")),m=Object(d["a"])(h,o,l,!1,null,"624bbade",null),f=m.exports,p={components:{layoutTop:c["a"],listItem:f},data:function(){return{screenHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,loading:!1,finished:!1,main_page_list:[],search:{name:"",phone:""},showSelect:!1,main_page_pagination:{current:1,pageSize:150,total:0},isEdit:!1,disabled:!0,moreNum:2}},created:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){this.handle_search(1)},watch:{finished:function(t){t&&(this.moreNum=this.main_page_list.length<5?5:3)}},methods:{onScroll:function(t){var e=t.target;e.scrollTop>=e.scrollHeight-e.offsetHeight-10&&this.handle_search()},onClose:function(){this.showSelect=!1},handleConfirm:function(){this.search.name||this.search.phone?(this.handle_search(1),this.showSelect=!1):this.$message.warning("请输入姓名或者手机号搜索")},handleCancel:function(){this.showSelect=!1},showSearch:function(){this.showSelect=!0},resetSearch:function(){this.search.name="",this.search.phone="",this.handle_search(1)},listClick:function(t){this.isEdit?t.selected=!t.selected:this.$router.push({path:"/offerDetail",query:{id:t.id}})},goManage:function(){this.main_page_list=this.main_page_list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{selected:!1})})),this.isEdit=!0},handleSelectAll:function(){this.main_page_list=this.main_page_list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{selected:!0})}))},handleCancelAll:function(){this.main_page_list=this.main_page_list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{selected:!1})}))},handleDel:function(){var t=this,e=this.main_page_list.filter((function(t){return t.selected}));e.length>0?this.$confirm({title:"确认",content:"是否删除所选报价",okText:"确认",cancelText:"取消",onOk:function(){var e=[];t.main_page_list.map((function(t){t.selected&&e.push(t.id)})),t.$service.user_offerDelete({id:e.join(",")}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("删除成功"),t.handle_search(1),t.isEdit=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){console.log("取消")}}):this.$message.warning("请选择方案图")},cancleAll:function(){this.main_page_list=this.main_page_list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{selected:!1})})),this.isEdit=!1},handle_search:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t&&(e.page=1,e.finished=!1),!e.loading){n.next=3;break}return n.abrupt("return");case 3:if(!e.finished){n.next=6;break}return e.msg||(e.msg=!0,a=e.$message.warning("已经到底啦~",0),setTimeout((function(){e.msg=!1,a()}),3e3)),n.abrupt("return");case 6:return e.loading=!0,n.next=9,e.$service.user_offerList({page:e.page,per_page:e.limit,customer_mobile:e.search.phone,customer_name:e.search.name});case 9:i=n.sent,e.loading=!1,i.data.forEach((function(t){t.selected=!1})),e.main_page_list=t?i.data:e.main_page_list.concat(i.data),e.finished=i.data.length!==e.limit,e.page=e.page+1;case 15:case"end":return n.stop()}}),n)})))()}}},g=p,_=(n("39a1"),n("e16d"),Object(d["a"])(g,a,i,!1,null,"8bc16a2e",null));e["default"]=_.exports},e16d:function(t,e,n){"use strict";n("5fe3")},e73e:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-layout-top"},[n("h4",[t._v(t._s(t.name))]),n("div",{staticClass:"back-btn",on:{click:t.goBack}},[n("a-icon",{staticStyle:{"vertical-align":"middle"},style:{fontSize:"0.23rem"},attrs:{type:"left-circle",theme:"filled"}})],1),n("div",{staticClass:"my-layout-top-right flex-box"},[n("div",{staticClass:"my-layout-top-op"},[t._t("default")],2)])])},i=[],s=(n("ac1f"),n("5319"),{props:{name:{type:String,default:""},backTo:String,baojiaheader:""},data:function(){return{}},methods:{goBack:function(){this.backTo?this.$router.replace(this.backTo):"qingdan"==this.baojiaheader?this.$router.push("/priceRecord"):this.$router.push("home/userinfo")}}}),r=s,c=(n("80f9"),n("2877")),o=Object(c["a"])(r,a,i,!1,null,null,null);e["a"]=o.exports},eec7:function(t,e,n){}}]);